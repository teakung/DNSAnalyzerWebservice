<!DOCTYPE html>
<html style="height: 100%">
   <head>
       <meta charset="utf-8">
   </head>
   <body style="height: 100%; margin: 0">
       <div id="container" style="height: 100%"></div>
       <script type="text/javascript" src="javascripts/echarts-all-3.js"></script>
       <script type="text/javascript" src="javascripts/bmap.min.js"></script>
       <script type="text/javascript" src="javascripts/jquery.js"></script>
       <script type="text/javascript">
var hours = ['00', '01', '02', '03', '04', '05', '06',
        '07', '08', '09','10','11',
        '12', '13', '14', '15', '16', '17',
        '18', '19', '20', '21', '22', '23'];
var days = ['1', '2', '3','4', '5', '6', '7','8', '9', '10','11', '12', '13', '14','15', '16', '17','18', '19', '20', '21'];

var data = []

var apiUrl = 'http://158.108.183.21:3000/dnsApi/summary/1489597200/1489680000'
var data = getJsonData(apiUrl);

console.log(data)

var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};
option = null;

function getJsonData(apiUrl) {
  // strUrl is whatever URL you need to call
  var strUrl = apiUrl, strReturn = "";
	//console.log(strUrl)
  jQuery.ajax({
    url: strUrl,
    success: function(response) {
      strReturn = response;
    },
    async:false
  });

  return strReturn;
}

option = {
    title: {
        text: 'DNS Traffic Summary',
        link: 'https://google.com'
    },
    backgroundColor: '#404a59',
    legend: {
        data: ['test'],
        left: 'right'
    },
    tooltip: {
        position: 'top',
        formatter: function (params) {
            return ''+params.value[2];
        }
    },
    grid: {
        left: 2,
        bottom: 10,
        right: 10,
        containLabel: true
    },
    xAxis: {
        type: 'category',
        data: hours,
        boundaryGap: false,
        splitLine: {
            show: true,
            lineStyle: {
                color: '#999',
                type: 'dashed'
            }
        },
        axisLine: {
            show: false
        }
    },
    yAxis: {
        type: 'category',
        data: days,
        axisLine: {
            show: false
        }
    },
    series: [{
        name: 'test',
        type: 'scatter',
        symbolSize: function (val) {
        	//var value = 1*(Math.log(1+255*val[2]))/(Math.log(1+255))
        	//console.log(value)
        	var value = val[2]/10000
            return value;
        },
        data: data,
        animationDelay: function (idx) {
            return idx * 2;
        }
    }]
};;
if (option && typeof option === "object") {
    myChart.setOption(option, true);
}
       </script>
   </body>
</html>